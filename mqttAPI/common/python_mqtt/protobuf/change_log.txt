ChangeLogï¼š

2022:
Sep.06: ver 62:
    * add UserCtrlSignalT:
        + USR_CTR_BURN_IN
    * add StateSignalT:
        + SIG_EXT_RESTORE_FACTORY_SET
    * add PbOutput:
        + UserCtrlSignalT UserCtr
    * update PbDockOutput:
        hasBackWashCount -> hasBackWashArea
    * update PbJYInput:
        hasBackWashCount -> hasBackWashArea
    * del PbJYOutput:
        - PbToggleT      isUpdatePM

Aug.26: ver 61:
     * add PbConfig:
        + int32          aedInterval
        + PbToggleT      doNotDisturbEnable
        + PbToggleT      carpetPressureEnable
     * add ErrorCodeT:
        + ERROR_SPLIT_ZONE_MULTIPLE_REGIONS
        + ERROR_SPLIT_ZONE_AREA_SMALL

Aug.17: ver 60:
     * add PbZoneOprTypeT:
        + ZONE_OPR_CLEAN
     * add PbJYInput:
        + int32            backWashCount
     * add PbZoneOpr:
        + repeated string          clean

Aug.16: ver 59:
     * add PbFloor:
        + repeated PbPolygon       thresholdZone
        + repeated PbPolygon       thresholdRealZone

Aug.09: ver 58:
     * add PbZoneOprTypeT:
        + ZONE_OPR_FINISH
     * add UserCtrlSignalT:
        + USR_CTR_RESTORE_FACTORY_SET

Aug.05: ver 57:
    * add ErrorCodeT:
        + ERROR_WS_DUST_UNINSTALL
        + ERROR_WS_ROBOT_DISCONNECT
        + ERROR_WS_ROBOT_DOCK_DISCONNECT
        + ERROR_SPLIT_ZONE_FAIL
        + ERROR_MERGE_ZONE_FAIL
        + ERROR_RESET_ZONE_FAIL
    * add AudioIDT:
        + AUDIO_EXPLORE_START
        + AUDIO_WIFI_SLOW
        + AUDIO_WHEEL_STUCK_L
        + AUDIO_WHEEL_STUCK_R
        + AUDIO_SFRONT_WHEEL_STUCK_L
        + AUDIO_SFRONT_WHEEL_STUCK_R
        + AUDIO_PICK_UP
        + AUDIO_BUTTON_STANDARD
        + AUDIO_EXPLORE_PAUSE
        + AUDIO_EXPLORE_FINISH
        + AUDIO_DOCK_WASH_MOP_START
        + AUDIO_WASH_MOP_START
        + AUDIO_WASH_MOP_PAUSE
        + AUDIO_DRY_MOP_START
        + AUDIO_DRY_MOP_FINISH
        + AUDIO_CLEAN_MODE_DRY
        + AUDIO_CLEAN_MODE_DRY_WET
        + AUDIO_CLEAN_MODE_WET
        + AUDIO_DRY_MIN
        + AUDIO_DRY_STANDARD
        + AUDIO_DRY_STRONG
        + AUDIO_DRY_MAX
        + AUDIO_WET_MIN
        + AUDIO_WET_STANDARD
        + AUDIO_WET_MAX
        + AUDIO_NAV_MODULE_ERR
        + AUDIO_LIDAR_BROKEN
        + AUDIO_ROBOT_ERR
        + AUDIO_WS_TRAY_UNINSTALL
        + AUDIO_WS_TRAY_FULL
        + AUDIO_WS_TANK_UNINSTALL
        + AUDIO_WS_TANK_EMPTY
        + AUDIO_WS_SEWAGE_TANK_FULL
    * add PbDockOutput:
        + int32            backWashCount
    * add PbZoneOprTypeT:
        + ZONE_OPR_NONE
        + ZONE_OPR_SPLIT
        + ZONE_OPR_MERGE
        + ZONE_OPR_RESET
    * del PbRoomAdjoin
    * add PbZone:
        - room_area
        + repeated  string neighborHash
        + float            area
    * add PbMapSmoothData:
        + int32     width
        + int32     height
        + PbPose2Df offset
        + bytes     mapData
    * del PbMapData:
        - segment_width
        - segment_height
        + PbMapSmoothData smoothData
    * add PbMapMeasure:
        + repeated PbMapData carpetMaps
        + repeated PbMapData dirtMaps
    * add PbSplitZone:
        + string              zoneHash
        + repeated PbPose2Df  pts
    * add PbMergeZone:
        + repeated string     zoneHash
    * add PbZoneOpr:
        + PbZoneOprTypeT           type
        + repeated PbSplitZone     split
        + repeated PbMergeZone     merge
    * add PbFloor:
        + PbZoneOpr                zoneOpr

July.25: ver 56:
     * add PbZone:
        + float room_area
     * add AudioIDT:
        + AUDIO_WEAK_SPOT_MODE
        + AUDIO_ONE_ROOM_CLEAN_MODE

July.12: ver 55:
     + add PbZone:
        + int32                   room_id
        + repeated PbRoomAdjoin   adjoin
     + add PbRoomAdjoin:
        + int32                   room_id
     * add PbInput:
        + PbCleanMode      VibratorSpeed
     * add BaseCmdOutT
        + BASE_WASH
        + BASE_WASH_PUMP
        + BASE_PUMP
     + add PbJY.proto
        + PbDockInput
            + hasWorkMode
            + hasWorkState
            + hasMountModule
            + hasCapacityModule
            + hasStateModule
        + PbDockOutput
            + hasWorkMode
            + hasDockCmd
            + hasSleepMode
        + PbJYInput
            + hasDockInput
        + PbJYOutput
            + hasDockOutput
            + hasIsOnStation
            + hasIsUpdatePM

June.29: ver 54:
    * add Lidar360EZAEDType
    * add UserCtrlSignalT:
        + USR_CTR_MOP_CLEAN_RESUME
    * add UserCtrlIOT:
        + MAX_UCIO_NUM
    * add DustBoxType:
        + BOX_DUSTBOX_JOYOUNG
        + BOX_DUSTBOX_PADLIFT
    * add DiagnoseEventType:
        + DT_Proc_VmRSS
    * add PbOutput:
        + string    ProcVmRSS
    * add PbBaseInput:
        + int32     moppingSpeed
        + int32     pumpSpeed
    * add PbBaseOutput:
        + PbToggleT padLift

    * del DockWorkState:
        - DOCK_STATE_NONE


May.20: ver 53:
    * add enum:
    * add PbDockInput:
       + DockWorkMode       workMode     
       + DockWorkState      workState    
       + int32      mountModule          
       + int32      capacityModuleBits   
       + int32      stateModuleBits      
       + int32      key                  
       + int32      keyCount             
    * add PbDockOutput: 
       + DockWorkMode     workMode    
       + DockControlCMD   Cmd         
       + DockSleepMode    sleepMode   

    * add enum DockWorkMode DockWorkState DockControlCMD DockSleepMode:

April.20: ver 52
    *  add sys state:
          + SYS_ST_MOP_CLEAN             =  30,
    *  add warning: 
          + WARN_CT_UNINSTALL            = 59,
          + WARN_CT_OVERFLOW             = 60,
          + WARN_ST_FULL                 = 61,
          + WARN_WT_UNINSTALL            = 62,
          + WARN_WT_EMPTY                = 63,
    *  add error: 
          + ERROR_CT_UNINSTALL           = 110,
          + ERROR_CT_OVERFLOW            = 111,
          + ERROR_ST_FULL                = 112,
          + ERROR_WT_UNINSTALL           = 113,
          + ERROR_WT_EMPTY               = 114,
          + ERROR_SP_WORK_WITHOUT_CUR    = 115,
          + ERROR_WSP_WORK_CUR_OVERLOAD  = 116,
          + ERROR_WFAN_WORK_WITHOUT_CUR  = 117,
          + ERROR_WFAN_WORK_CUR_OVERLOAD = 118,
          + ERROR_WWP_WORK_WITHOUT_CUR   = 119,
          + ERROR_WWP_WORK_CUR_OVERLOAD  = 120,
          + ERROR_WFAN_IDLE_WITH_CUR     = 121,
          + ERROR_WWP_IDLE_WITH_CUR      = 122,
          + ERROR_WSP_IDLE_WITH_CUR      = 123,
          + ERROR_WCHARGING_CUR	         = 124,
          + ERROR_WCHARGE_INTRRUPT       = 125,
          + ERROR_WCHARGE_OVER_VOLTAGE   = 126,
          + ERROR_WCHARGE_LOW_VOLTAGE    = 127,

Feb.09: ver 51
       * PbConst:
         + USR_CTR_WEAK_SPOT_CLEAN  
       TBC...
      
       
            
Jan.08: ver 50:
       * PbBaseInput:
         + oneof hasDustbinType    { int32     dustBinType      = 12;}   
         + oneof hasChargeType     { int32     chargeType       = 13;}   
       * ZoneCleanMode 
         + ZCM_CARPET_VERIFY   = 3,
         + ZCM_ULTRA_MOPPING   = 4,
       * 2022-Jan-06:
       * + update fan jet enable to fan jet speed in PbConfig&Base

Dec.03: ver 49:
       merge with WetDry branch 
       * add errors: 
          + ERROR_WATER_TANK_EMPTY		
          + ERROR_EXPLORE_MODE_INSTALL_TANK	
          + ERROR_CARPET_DETECT			
       * add sys state:  
          + SYS_ST_PRIMING
       * add audios:
          + AUDIO_EXPLORE_MODE_INSTALL_TANK
          + AUDIO_WATER_TANK_EMPTY
          + AUDIO_TANK_UNINSTALLED

          

Oct.28: ver 48
       * PbBase:
         + oneof hasWaterTank      { PbToggle  waterTank         = 10;}   
         + oneof hasCarpet         { int32     carpet            = 11;} 

       * PbBaseOutput:
         + oneof hasWaterLevel      { int32     waterLevel        = 10;}  
         + oneof hasWaterTank       { PbToggleT waterTank         = 11;}   
         + oneof hasMoppingSpeed    { int32     moppingSpeed      = 12;} 
         + oneof hasFanJet          { PbToggleT fanJet            = 13;}
        
       * PbConsts:
         MapTypeT
         + MT_CARPET                    = 8;
          
         ZoneTypeT
         + ZONE_CARPET                  = 3;
          
       * PbOutput
         + oneof hasPriming           { PbToggleT         isPriming          = 42; }
         + oneof hasFanJetToggle      { PbToggleT         fanJetStatus       = 43; }
         + oneof hasCarpetDetectToggle{ CarpetDetectModeT carpetDetectStatus = 44; }
    
 
       * PbConfig
         + oneof hasFanJetEnable    { PbToggleT     fanJetEnable  = 14; }
         + oneof hasCarpetDetectMode{ CarpetDetectModeT carpetDetectMode           = 15; }
 

July.2: ver 47 
       * add SKU and HWD in pbnetwork 

Apr.xx: ver 46 
       * add warn WARN_LIDAR_BROKEN
       * add SIG_INT_LIDAR_RESET_SUCCESS
       * add SIG_EXT_NEW_CLEAN_MISSION
       * add LidarRebootStateT
       * add PinStateT
       * add UserCtrlIOT

Apr.xx: ver 45 
       * pboutput add ReloctStatus hasRelocState = 39;

Apr.12: ver 44 
       * add domo data
       *  - DT_GO_ZONE_INFO
       *  - DT_NO_GO_ZONE_INFO
       *  - DT_CLEAN_MODE
       * add PbOutput.isRelocalizing 
      
Apr.12: ver 43 
       * add Domo
       *  - DT_BATTERY_VALUE_AT_STATE_TRANS
       *  - DT_CARTO_CRASH_DOWN

Apr.12: ver 42 
       * add: pbtoggle: continueCrossHatchStatus in PAOutput

Mar.25: ver 41 
       * add: pbtoggle: continueCrossHatchCleanEnable in PbConfig

Feb.19: ver 40 
       * add: SYS_ST_AUTO_EXPLORE( added for months, but not used)
       * add: flagUserConfirmed in PbMapData
       * add: Add CleanMode/CleanLvl/CleanLiveness for PbZone

2020: 

Dec.31: ver 38
       *  add: QInternal CartoCommand and Carto output.
       *  add: PbOutput.internalOutput; 
       *  add: PbInput.internalInput; 

Oct.22: ver 37
       *  add: Warn_relocal_failed_with_nogo
       *  add: Error_nogo_escape_timeout
       *  add: bdp_in/out in PbDebug
       *  add: add enable scan in pbdebug.
       *  add: segments map for mapdata 

Jul.07: ver 36
       * add: Time/Area ratio in pbmap.
       * add: WARN_NEED_ENABLE_RR        
       * add: auto zone plan in PbFloor 
       * add: QRCode for PbNetwork PbDeviceProfile                            
       * add: Room by Room enable in PbConfig 
       * add: clean ratio in PbZone.
       * add: WARN_RBR_NOT_COVER_ALL

Mar.02: ver 35
       * add: hasRRToggle&&RRToggle into PbOutput.
       * add: hasERToggle&&ERToggle into PbOutput.
       * add: ERROR$WARN with poses into PbFloor.
       * add: extended info string(json ).

Feb.17: ver 34
       * fix: some comments for PbMap, map default unit from 0.07->0.08;
       * add: lidar data in PbLidar
       * add: MapDataType, e.g. MDT_LIDAR_MAP MDT_HEAT_MAP 
       * add: MapDataType for MapData

2019:
Oct.14: ver 33
       add:  
       * add mem free in device info
       * add SYS_ST_WAITING_2R_PENDING
       * add SYS_ST_WAITING_2R
       * update remove useless ERROR, and add new one.
       * add candidateMaps in PbFloor.MapMesare
       * add following into PbMapData
       *    - ID
       *    - failedCounts
       *    - realCredit
       *    - lmDensity
       *    - lmStability
       * add heatMaps into MapMeasure 
       * add RR sig used to communicate with app 
       *    - SIG_INT_REQ_2R_PERMIT
       *    - SIG_EXT_ENABLE_2R_ONCE
       *    - SIG_EXT_SET_2R_PENDING
       *    - SIG_INT_2R_OP_DENIED
       *    - SIG_INT_FLOOR_CTR_DENIED 
       *    - SIG_INT_FLOOR_CTR_ACCEPTED
       * add ERROR_GNG_ZONE_CLEAN_FAILED.
       * add verison for PbFloor
       * add DnDtoggle for PbInput&PbOutput
       * add signal to FloorControlT:
       *    - FL_CTR_CANDIDATE_MERGE
       *    - FL_CTR_CANDIDATE_DELETE
       *    - FL_CTR_CANDIDATE_THUMB_UP
       *    - FL_CTR_CANDIDATE_THUMB_DOWN
       *    - FL_CTR_CANDIDATE_RESET
       *    - FL_CTR_CANDIDATE_LOCK
       * add candidateIDs to FloorControlParams
       * add PbMap.isNewCandidate
       * add PbFloor.isLocked

Aug.01: ver 32
       add:  
       - add ModuleName  in PbNetwork.deviceprofile
       - add USR_CTR_WARMBOOT 
       - add WARN_CAMERA_WRONG 
Jun.19: ver 31
       add:  
       - chargeStationPose for PbMapData 
       - errorPoses     for PbFloor
       - add oneof to chargeStationPose 
       - add PbMap.shapeScore 
       - update warn code: warn_wifi...
       - add wifistatus: WIFI_UNCONNECTED

May.21: ver 30
    1. add: 
       - change ZoneList ==> FloorControlParams
       - ZoneList for both PbInput and PbOutput
       - PbNetconfig.dsnInfo for Device serial number

May.6:  ver 29
    1. update: 
       - SIG_INTER_PM_REQ_SLEEP    => SIG_INT_PM_REQ_SLEEP       
       - SIG_INTER_PM_PERMIT_SLEEP => SIG_INT_PM_PERMIT_SLEEP    
    2. add following defines
       - SIG_INT_BDP_REQ_SSID      signal send from StateMachine To SCM, to get SSID for BDP
       - PbNetConfig.bdpssid       return string from SCM.
       - PbZone.enable             denote whether the zone is enabled.
       - MapData.updateCount       denote how many times the floor have been updated. 
       - MapMeasureRetT            internal usage, for logic how to update map 
       - USR_CTR_AGING_TEST        internal usage. for aging test
       - SIG_EXT_MAP_CLEAR_ALL     user delete all persist map
       - PbFloor.cleanCounter      how many times the map have been cleaned 
       - MM_UPDATE_VT              
       - MM_UPDATE_LIST            

Apr.23: ver 28
    1. add following defines
       - AUDIO_WIFI_SSID_NOT_FOUND,
       - AUDIO_WIFI_NO_INTERNET   ,
       - AUDIO_WIFI_NO_SERVICE    ,
       - AUDIO_CLIFF_START_FAIL,
       - AUDIO_WHEEL_DROP_START_FAIL,
       - AUDIO_ENCODER_BROCKEN,
       - AUDIO_BOUNDARY_ERR,
       - ERROR_CLIFF_START_FAIL
       - ERROR_WHEEL_DROP_START_FAIL
       - ERROR_DATA_ENCODER
       - ERROR_BOUNDARY
    2. add nap time to set up sleep time

Apr.15:
    1. add SIG_INTER_PM_REQ_SLEEP
    2. add SIG_INTER_PM_PERMIT_SLEEP    
    3. add BoxLifeMode in PbConfig 
    4. add TimeZone Set in PbConfig
    5. add error:ssid_not_found, error:hall, error: encoder,error:wifi no internet

    Caution! TimeZone currently is only used for IMU Calibration!!

Apr.3 :
    1. add OTA_SIG
    2. add floorControl to pboutput 

Apr.1 :
    1. Add BDP Version, BDP.DH Version BDP.DP Version

Mar.28:
    1. Add Toggle:timecali, to indicated robot to calibrate silently
    2. Add StateSignal to PbOutput:
    3. Add SIG_INT_SHUTDOWN/REBOOT/RESTart to StateSignal 

Mar.27:
    1. Add OTA_DL_OK(sig_ota_start_process) and OTA_ABORT signal into StateSignalT
    2. Add sig_sleep_awake and goto_sleep(sig_sleep_heart_beat_ok) for scheduled clean & sleep.
    3. fix: MapServerInput is an empty class 


Mar.26:
    1. add IMU cali command for VT control
    2. add playAudioFile in pbinput 
    3. add PbToggleT to instead of bool type

Mar.25:
    1.add hardware wifi version & bootloader version
    2.add floor control,
    3.add isDefault in PbFloor
 


Mar.24:
    1. add enable signal type for protobuf


Mar.20:
    1. add credit for map

Mar.19: 
    1. add MapMeasure for PbFloor used to evaluate Map Goodness.
    2. ADD WARNING_RELOC_FAILED (ERROR_RELOC_FAILED is still exit);
    3. add mapPersist for PbFloor
    4. add AEDModeEnable && RRModeEnable  to PbConfig
    5. update: vt map summary



Mar.19: 
    1. add MapMeasure for map goodness evaluation. 

Mar.16: 
    1. add DeviceProfile: hardware info; 

Mar.14: 
    1. add docs: How to use RTC.md
 
Mar.13: 
    1. add suction mode (silent normal MAX) 2. add MapVtSummary 3. add Changelog, 4. add VTPP transform in map

